# ALT Mobile Pinephone / Pinephone Pro

Данный блок посвящён установке системы ALT Mobile на устройства
Pinephone и Pinephone Pro и другой важной информации которая может пригодится при установке.

## Установка ALT Mobile на Pinephone / Pinephone Pro


### Скачивание образа ALT Mobile

- Образ ALT Mobile можно скачать c
    [ftp](http://beta.altlinux.org/mobile/latest/), нам
    необходимы образы начинающиеся с pinephone, к примеру
    `pinephone-phosh-20231123-aarch64.img.xz`.

### Установка на внутреннюю память (emmc)

**Подготовка телефона:**

- Убедитесь, что на вашем Pine Phone установлен загрузчик tow-boot на
    SPI flash.
- Для загрузки телефона в режиме экспорта emmc как USB-диска, при
    включении зажмите кнопку Volume Up.

**Графический способ установки:**

- Распакуйте скаченный образ ALT Mobile.
- Используйте gnome-disk-utility для записи образа на SD карту:
- Откройте gnome-disks и выберите USB-диск вашего Pinephone.
- Отформатируйте его и выберите пункт "Восстановить образ системы".
 - Укажите распакованный образ и начните процесс записи.
 - После записи рекомендуется расширить системный раздел. Для этого выберите пункт "Изменить размер"

**Запись образа ALT Mobile на emmc через терминал:**

- Выполните команду, где `sdX` - это накопитель вашего
    Pinephone(необходимо заменить X на ваши данные):

```Shell
xzcat pinephone-phosh-latest-aarch64.img.xz | dd of=/dev/sdX oflag=direct,sync iflag=fullblock bs=1M status=progress
```
- Рекомендуется увеличить размер файловой системы, это можно сделать
    командами:

```
echo ", +" | sfdisk -N 1 /dev/sdX
resize2fs -p /dev/sdX1
```
- После завершения процедуры, перезагрузите устройство для запуска с
    новой системой.

### Установка на SD карту

**Графический способ установки:**

- Распакуйте скаченный образ ALT Mobile.
- Используйте gnome-disk-utility для записи образа на SD карту:
- Откройте gnome-disks и выберите SD карту.
- Отформатируйте карту и выберите пункт "Восстановить образ системы".
- Укажите распакованный образ и начните процесс записи.

**Установка через терминал:**

- Используйте команду `dd` для записи образа ALT Mobile на SD карту:
```Shell
    xzcat your-image-file.img.xz | dd of=/dev/sdX oflag=direct,sync iflag=fullblock bs=1M status=progress
```
- После завершения записи, извлеките карту из компьютера и вставьте её
    в Pine Phone.
- Для загрузки с SD карты, при включении телефона зажмите кнопку
    Volume Down.

### Установка Tow-Boot на Pinephone Pro

- Скачайте образ установщика Tow-Boot со [страницы
    релизов](https://github.com/Tow-Boot/Tow-Boot/releases/tag/release-2022.07-006). Образ установщика ищем согласно модели вашего устройства.

## Дополнительно

### Стандартные данные учётных записей

- Логины по умолчанию: root: `root`, password: `altlinux`; user: `altlinux`,
    password: `271828`.

### Порядок загрузки в Pinephone Pro

В Pinephone Pro используется следующий порядок загрузки по умолчанию:

1.  **SPI flash:** Первым источником для поиска загрузчика является SPI
    flash. Если в нем установлен загрузчик (например, Tow-Boot или
    U-Boot), он будет использоваться для загрузки системы.
2.  **Внутренняя память (eMMC):** Если загрузчик не найден в SPI flash,
    устройство попытается загрузиться с внутренней памяти eMMC.
3.  **Карта microSD:** В случае отсутствия загрузчика в SPI flash и на
    eMMC, система попытается загрузиться с карты microSD.

**Выбор источника загрузки:**

- В **Explorer Edition, заказанном после ноября 2023 года**, карта
    microSD загружается первой из-за использования rk2aw вместо
    Tow-Boot.
- В **Explorer Edition, заказанной после июля 2022 года**, удерживайте
    клавишу уменьшения громкости во время включения устройства. Эти
    устройства поставляются с прошивкой Tow-Boot для SPI.
- В **Explorer Edition, заказанном в период с января по июль 2022
    года**, удерживайте кнопку RE под крышкой в течение нескольких
    секунд при включении устройства. Для старых партий требуется
    перепрошивка Tow-Boot.

Этот порядок загрузки и возможность выбора источника обеспечивают
гибкость в использовании Pinephone Pro, позволяя легко переключаться
между различными операционными системами, установленными на разных
носителях.

## Возможные проблемы


**Проблемы при прошивке emmc:**

- Если возникают проблемы с подключением, попробуйте перевернуть
    разъем Type-C.
- Убедитесь, что используете подходящий порт и кабель. 